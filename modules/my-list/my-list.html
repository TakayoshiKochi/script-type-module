<template>
  <style>
   :host { display: block; }
  .list {
    width: 400px;
    text-transform: capitalize;
  }
  </style>
  <div class="list">
    <slot></slot>
    <decorated-button>Click to add...</decorated-button>
  </div>
</template>
<script type="module-polyfill">
import frag from 'magic-html-fragment';

// Open question:
// This can be <script type="module-polyfill" src=...> at the top of this file,
// but due to "one script" restriction, dependency has to be written this way.
import '../decorated-button/decorated-button.html';

class MyList extends HTMLElement {
  constructor() {
    super();
    console.log('<my-list> constructor.');
  }
  connectedCallback() {
    if (this.shadowRoot)
      return;
    let root = this.attachShadow({mode: 'open'});
    let tmpl = frag.querySelector('template');
    root.appendChild(document.importNode(tmpl.content, true));
    console.log('<my-list> connected.');

    let button = root.querySelector('decorated-button');
    // Allow list element addition on click event.
    button.addEventListener('click', (e) => {
      let card = document.createElement('my-namecard');
      card.textContent = 'Click to edit...';
      this.appendChild(card);
    });
  }
}

window.customElements.define('my-list', MyList);
</script>
